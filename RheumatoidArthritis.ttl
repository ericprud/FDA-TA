# $Id: RheumatoidArthritis.ttl,v 1.12 2014-03-03 16:51:24 eric Exp $
#
# ericP at the keyboard

@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .

@prefix renal: <http://www.w3.org/2013/12/FDA-TA/renal#> .
@prefix xplant: <http://www.w3.org/2013/12/FDA-TA/transplant#> .
@prefix : <http://www.w3.org/2013/12/FDA-TA/RheumatoidArthritis#> .
@prefix core: <http://www.w3.org/2013/12/FDA-TA/core#> .
@prefix data: <http://www.w3.org/2013/12/FDA-TA/datatypes#> .

<http://www.w3.org/2013/12/FDA-TA/RheumatoidArthritis> a owl:Ontology ;
    owl:imports <http://www.w3.org/2013/12/FDA-TA/core> .


:SwollenJointCountObservation 
    rdfs:subClassOf 
        core:QuantitativeMeasurement ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedSwollenJointCountObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedSwollenJointCountObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .

:TenderJointCountObservation 
    rdfs:subClassOf 
        core:QuantitativeMeasurement ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedTenderJointCountObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedTenderJointCountObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .

# s/peptide/protein/ per http://www.questdiagnostics.com/testcenter/testguide.action?dc=CF_RheumatoidArthritis
:CReactiveProteinObservation 
    rdfs:subClassOf 
        core:QuantitativeMeasurement ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedCReactiveProteinObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedCReactiveProteinObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .

:ErythrociteSedimentationRateObservation 
    rdfs:subClassOf 
        core:QuantitativeMeasurement ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedErythrociteSedimentationRateObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedErythrociteSedimentationRateObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .

:PatientGlobalAssessmentOfDiseaseActivityObservation 
    rdfs:subClassOf 
        core:SignsAndSymptoms ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedPatientGlobalAssessmentOfDiseaseActivityObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedPatientGlobalAssessmentOfDiseaseActivityObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .

:PhysicianGlobalAssessmentOfDiseaseActivityObservation 
    rdfs:subClassOf 
        core:SignsAndSymptoms ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedPhysicianGlobalAssessmentOfDiseaseActivityObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedPhysicianGlobalAssessmentOfDiseaseActivityObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .

# !! name is confusing
:PatientPainAssessmentObservation 
    rdfs:subClassOf 
        core:SignsAndSymptoms ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedPatientPainAssessmentObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedPatientPainAssessmentObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .

# HAQ-DI

:HAQ-DICategory_ObservationResult 
    rdfs:subClassOf 
        bridg:PerformedObservationResult ,
        [ owl:onProperty data:value ; owl:allValuesFrom [
            rdf:type rdfs:Datatype ;
            owl:onDatatype xsd:integer ;
            owl:withRestrictions ( [ xsd:minInclusive 0 ] [ xsd:maxInclusive 3 ] )
        ] ] .

:HAQ-DICategory_Observation 
    rdfs:subClassOf
        core:SignsAndSymptoms ,
        [ owl:onProperty core:hasResultValue ; owl:allValuesFrom :SingleOutcomeAssessmentValue ] .

:HAQ-DI_DressingAndGroomingObservation 
    rdfs:subClassOf 
        :HAQ-DICategory_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedHAQ-DI_DressingAndGroomingObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedHAQ-DI_DressingAndGroomingObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .

:HAQ-DI_ArisingObservation 
    rdfs:subClassOf 
        :HAQ-DICategory_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedHAQ-DI_ArisingObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedHAQ-DI_ArisingObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:HAQ-DI_EatingObservation 
    rdfs:subClassOf 
        :HAQ-DICategory_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedHAQ-DI_EatingObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedHAQ-DI_EatingObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:HAQ-DI_WalkingObservation 
    rdfs:subClassOf 
        :HAQ-DICategory_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedHAQ-DI_WalkingObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedHAQ-DI_WalkingObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:HAQ-DI_HygieneObservation 
    rdfs:subClassOf 
        :HAQ-DICategory_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedHAQ-DI_HygieneObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedHAQ-DI_HygieneObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:HAQ-DI_ReachObservation 
    rdfs:subClassOf 
        :HAQ-DICategory_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedHAQ-DI_ReachObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedHAQ-DI_ReachObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:HAQ-DI_GripObservation 
    rdfs:subClassOf 
        :HAQ-DICategory_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedHAQ-DI_GripObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedHAQ-DI_GripObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:HAQ-DI_ActivitiesObservation 
    rdfs:subClassOf 
        :HAQ-DICategory_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedHAQ-DI_ActivitiesObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedHAQ-DI_ActivitiesObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .

# SF-36

:SF-36Category_ObservationResult 
    rdfs:subClassOf 
        bridg:PerformedObservationResult ,
        [ owl:onProperty data:value ; owl:allValuesFrom [
            rdf:type rdfs:Datatype ;
            owl:onDatatype xsd:integer ;
            owl:withRestrictions ( [ xsd:minInclusive 0 ] [ xsd:maxInclusive 100 ] )
        ] ] .

:SF-36Category_Observation 
    rdfs:subClassOf
        core:SignsAndSymptoms ,
        [ owl:onProperty core:hasResultValue ; owl:allValuesFrom :SingleOutcomeAssessmentValue ] .

:SF-36_PhysicalFunctionObservation 
    rdfs:subClassOf 
        :SF-36Category_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedSF-36_PhysicalFunctionObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedSF-36_PhysicalFunctionObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:SF-36_SocialFunctionObservation 
    rdfs:subClassOf 
        :SF-36Category_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedSF-36_SocialFunctionObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedSF-36_SocialFunctionObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:SF-36_Role-physicalObservation 
    rdfs:subClassOf 
        :SF-36Category_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedSF-36_Role-physicalObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedSF-36_Role-physicalObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:SF-36_Role-emotionalObservation 
    rdfs:subClassOf 
        :SF-36Category_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedSF-36_Role-emotionalObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedSF-36_Role-emotionalObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:SF-36_GeneralHealthObservation 
    rdfs:subClassOf 
        :SF-36Category_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedSF-36_GeneralHealthObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedSF-36_GeneralHealthObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:SF-36_MentalHealthObservation 
    rdfs:subClassOf 
        :SF-36Category_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedSF-36_MentalHealthObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedSF-36_MentalHealthObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:SF-36_VitalityObservation 
    rdfs:subClassOf 
        :SF-36Category_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedSF-36_VitalityObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedSF-36_VitalityObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .


:SF-36_BodilyPainObservation 
    rdfs:subClassOf 
        :SF-36Category_Observation ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:allValuesFrom bridg:PerformedClinicalResult ] ,
        [ owl:onProperty bridg:PerformedObservation.resultedPerformedObservationResult ; owl:cardinality 1 ] ,
        [ owl:onProperty bridg:PerformedActivity.instantiatedDefinedActivity ; owl:hasValue :DefinedSF-36_BodilyPainObservation ] ;
    rdfs:label "@@" ; skos:definition "@@" .
:DefinedSF-36_BodilyPainObservation a bridg:DefinedObservation ;
    rdfs:label "@@" .



:DiseaseActivityScoreEndpoint a core:EfficacyEndpoint ;
    skos:definition "@@" ;
    core:sparqlQuery """
    SELECT ("DiseaseActivityScoreEndpoint" AS ?endpoint) (COUNT(*) AS ?count) (GROUP_CONCAT(?label) AS ?labels)
    WHERE {
      BIND (1 AS ?g)
      [
        bridg:Subject.performingBiologicEntity [ foaf:name ?name ] ;
        core:hasOutcomeAssessment ?oa ] .
          { SELECT ?oa ?l { ?oa core:afterIntervention [ bridg:PerformedActivity.instantiatedDefinedActivity [ rdfs:label ?l ] ] } GROUP BY ?oa ?l }
          BIND (CONCAT(?name, '(', ?l, ")") AS ?label)

          ?oa core:hasResultValue renal:CeasedToFunction .
    } GROUP BY ?g
""" .


:AllEndpoints owl:equivalentClass [ owl:unionOf (
        :DiseaseActivityScoreEndpoint :PhysicalFunctionEndpoint :HealthRelatedQualityOfLifeEndpoint :RadiographicResponseEndpoint 
    ) ] .

:Protocol a core:TAProtocol ;
    rdfs:subClassOf 
        [ owl:onProperty :hasEndpoint ; owl:someValuesFrom :AllEndpoints ] .

